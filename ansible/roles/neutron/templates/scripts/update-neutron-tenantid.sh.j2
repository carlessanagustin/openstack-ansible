#!/usr/bin/env bash

{% if neutron_controller %}

source /var/scripts/admin-openrc.sh

SERVICE_TENANT_ID=`keystone tenant-get service | grep id | awk '{print $4}'`
sed "s/SERVICE_TENANT_ID/${SERVICE_TENANT_ID}/g" /etc/neutron/neutron.conf.templ > /etc/neutron/neutron.conf

NEUTRON_CONF_DIFF=$(diff /etc/neutron/neutron.conf.templ /etc/neutron/neutron.conf)

echo $NEUTRON_CONF_DIFF

{% else %}

cp /etc/neutron/neutron.conf.templ /etc/neutron/neutron.conf

{% endif %}